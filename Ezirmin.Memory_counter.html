<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Ezirmin.Memory_blob_log.html">
<link rel="next" href="Ezirmin.Memory_log.html">
<link rel="Up" href="Ezirmin.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ezirmin" rel="Chapter" href="Ezirmin.html"><link title="Mergeable counters" rel="Section" href="#1_Mergeablecounters">
<title>Ezirmin.Memory_counter</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Ezirmin.Memory_blob_log.html" title="Ezirmin.Memory_blob_log">Previous</a>
&nbsp;<a class="up" href="Ezirmin.html" title="Ezirmin">Up</a>
&nbsp;<a class="post" href="Ezirmin.Memory_log.html" title="Ezirmin.Memory_log">Next</a>
</div>
<h1>Module <a href="type_Ezirmin.Memory_counter.html">Ezirmin.Memory_counter</a></h1>

<pre><span class="keyword">module</span> Memory_counter: <code class="type"><a href="Ezirmin.Counter.html">Counter</a></code><code class="type"> </code></pre><div class="info module top">
A counter that uses git in-memory backend.<br>
</div>
<hr width="100%">
<br>
<h1 id="1_Mergeablecounters">Mergeable counters</h1><br>

<pre><span class="keyword">include</span> <a href="Ezirmin.Repo.html">Ezirmin.Repo</a></pre>

<pre><span id="VALinc"><span class="keyword">val</span> inc</span> : <code class="type">?message:string -> ?by:int -> branch -> path:string list -> unit Lwt.t</code></pre><div class="info ">
<code class="code">inc m d b p</code> increments the counter at path <code class="code">p</code> in branch <code class="code">b</code> by <code class="code">d</code>.
      The commit message is <code class="code">m</code>.<br>
</div>

<pre><span id="VALdec"><span class="keyword">val</span> dec</span> : <code class="type">?message:string -> ?by:int -> branch -> path:string list -> unit Lwt.t</code></pre><div class="info ">
<code class="code">dec m d b p</code> decrements the counter at path <code class="code">p</code> in branch <code class="code">b</code> by <code class="code">d</code>.
      The commit message is <code class="code">m</code>.<br>
</div>

<pre><span id="VALread"><span class="keyword">val</span> read</span> : <code class="type">branch -> path:string list -> int Lwt.t</code></pre><div class="info ">
<code class="code">read b p</code> reads the value of the counter at path <code class="code">p</code> in branch <code class="code">b</code>.<br>
</div>

<pre><span id="VALwatch"><span class="keyword">val</span> watch</span> : <code class="type">branch -><br>       path:string list -> (int -> unit Lwt.t) -> (unit -> unit Lwt.t) Lwt.t</code></pre><div class="info ">
<code class="code">watch b p cb</code> watches the counter at the path <code class="code">p</code> in the branch <code class="code">b</code>. On each
      counter update, the callback function <code class="code">cb v</code> is invoked, where <code class="code">v</code> is the
      new value of the counter. Before installing watches, a listener thread
      must be started with <a href="Ezirmin.Repo.html#VALinstall_listener"><code class="code"><span class="constructor">Ezirmin</span>.<span class="constructor">Repo</span>.install_listener</code></a> that watches the store for
      changes.<br>
<b>Returns</b> a function to disable the watch.<br>
</div>
</body></html>